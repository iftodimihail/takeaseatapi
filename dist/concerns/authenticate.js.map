{"version":3,"sources":["../../src/concerns/authenticate.js"],"names":["req","res","next","passport","authenticate","session","err","user","error","unauthorized","currentUser"],"mappings":";;;;;;AAAA;;;;AACA;;;;;;kBAEe,UAACA,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AACjCC,qBAASC,YAAT,CAAsB,KAAtB,EAA6B,EAACC,SAAS,KAAV,EAA7B,EAA+C,UAACC,GAAD,EAAMC,IAAN,EAAe;AAC5D,QAAID,GAAJ,EAAS;AACP,8BAASL,GAAT,EAAcO,KAAd,CAAoB,uBAApB,EAA6C,GAA7C;AACD,KAFD,MAEO,IAAI,CAACD,IAAL,EAAW;AAChB,8BAASN,GAAT,EAAcQ,YAAd,CAA2B,wCAA3B;AACD,KAFM,MAEA;AACLT,UAAIU,WAAJ,GAAkBH,IAAlB;AACAL;AACD;AACF,GATD,EASGF,GATH,EASQC,GATR,EASaC,IATb;AAUD,C","file":"authenticate.js","sourcesContent":["import passport from 'passport';\nimport response from './response';\n\nexport default (req, res, next) => {\n  passport.authenticate('jwt', {session: false}, (err, user) => {\n    if (err) {\n      response(res).error('Internal server error', 500);\n    } else if (!user) {\n      response(res).unauthorized('Not authorized to access this resource');\n    } else {\n      req.currentUser = user;\n      next();\n    }\n  })(req, res, next);\n}\n"]}